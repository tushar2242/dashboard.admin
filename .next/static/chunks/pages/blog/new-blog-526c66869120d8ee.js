(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{87056:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/new-blog",function(){return t(10905)}])},10905:function(e,a,t){"use strict";t.r(a);var l=t(85893),n=t(11163),s=t(67294),r=t(91742),i=t(1613),o=t(5121),d=t(18389),c=t(5152),m=t.n(c),u=t(18051);let h=m()(()=>Promise.all([t.e(326),t.e(640)]).then(t.t.bind(t,72911,23)),{loadableGenerated:{webpack:()=>[72911]},ssr:!1}),g="https://api.newworldtrending.com/blog";a.default=(0,i.Z)(()=>{(0,n.useRouter)();let e=(0,s.useRef)(null),a={title:"",bannerImg:[],permalink:"",content:"",metaTitle:"",metaDescription:"",categories:[],tags:[],featuredImages:[],author:"",status:"draft",instagramLink:"https://www.instagram.com/newworld.trending/",youtubeLink:"https://youtube.com/@NWT_YT?feature=shared",facebookLink:"https://www.newworldtrending.com/",adminId:"",categoryId:"",isFeatured:!1,trending:0},[t,i]=(0,s.useState)(a),[c,m]=(0,s.useState)(!1),handleInputChange=(e,a)=>{i({...t,[e]:a})},handleTitleChange=e=>{i({...t,title:e.target.value,metaTitle:e.target.value})};async function handleAddBlog(e){m(!0),e.preventDefault();let l=await (0,d.e)(t.bannerImg),n=await (0,d.e)(t.featuredImages);try{var s,r;let e=await o.Z.post(g+"/add_blog",{...t,featuredImages:n,bannerImg:l});alert(e.data.message),(null===(r=e.data)||void 0===r?void 0:null===(s=r.message)||void 0===s?void 0:s.length)>0&&i(a)}catch(e){console.log(e),m(!1)}m(!1)}let[x,f]=(0,s.useState)([]);async function fetchCategories(){try{let e=await o.Z.get(g+"/category");f(e.data.categories)}catch(e){console.log(e),f([])}}return(0,s.useEffect)(()=>{fetchCategories(),i({...t,adminId:sessionStorage.getItem("userId")})},[]),(0,l.jsx)(l.Fragment,{children:c?(0,l.jsx)(u.U,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{}),(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"col-md-12 d-flex flex-column align-items-center justify-content-center",children:(0,l.jsx)("form",{onSubmit:handleAddBlog,children:(0,l.jsx)("div",{className:"card md-12",children:(0,l.jsxs)("div",{className:"card-body row container gx-4 gy-4",children:[(0,l.jsx)("div",{className:"pt pb-2",children:(0,l.jsx)("h5",{className:"card-title text-center pb-0 fs-4",children:"Add Blog Here"})}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"title",className:"form-label",children:" Title"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"title",value:t.title,required:!0,onChange:e=>handleTitleChange(e)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"formFile",className:"form-label",children:"Banner Image"}),(0,l.jsx)("input",{type:"file",className:"form-control-file",id:"formFile",required:!0,onChange:e=>(function(e){let a=[e.target.files[0]];i({...t,bannerImg:a})})(e)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"content",className:"form-label",children:"Content"}),(0,l.jsx)(h,{ref:e,value:t.content,tabIndex:1,required:!0,onChange:e=>{handleInputChange("content",e)}})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"Meta Title",className:"form-label",children:"Meta Title"}),(0,l.jsx)("input",{className:"form-control",id:"metaTitle",value:t.metaTitle,required:!0,onChange:e=>handleInputChange("metaTitle",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"metaDescription",className:"form-label",children:"Meta Description"}),(0,l.jsx)("textarea",{className:"form-control",id:"metaDescription",value:t.metaDescription,required:!0,onChange:e=>handleInputChange("metaDescription",e.target.value)})]}),(0,l.jsxs)("div",{className:"col-md-12",children:[(0,l.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Category"}),(0,l.jsxs)("select",{className:"form-select",id:"categories",required:!0,onChange:e=>handleInputChange("categoryId",e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select Category"}),x.length>0&&x.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Keywords"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"categories",value:t.categories.join(", "),required:!0,onChange:e=>handleInputChange("categories",e.target.value.split(", "))})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"tags",className:"form-label",children:"Tags"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"tags",value:t.tags.join(", "),required:!0,onChange:e=>handleInputChange("tags",e.target.value.split(", "))})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"featuredImages",className:"form-label",children:"Featured Images"}),(0,l.jsx)("input",{type:"file",className:"form-control-file",id:"featuredImages",multiple:!0,required:!0,onChange:e=>(function(e){let a=e.target.files,l=Array.from(a);i({...t,featuredImages:l})})(e)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"author",className:"form-label",children:"Author"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"author",value:t.author,required:!0,onChange:e=>handleInputChange("author",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,l.jsxs)("select",{className:"form-select",id:"status",value:t.status,onChange:e=>handleInputChange("status",e.target.value),children:[(0,l.jsx)("option",{value:"published",children:"Published"}),(0,l.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:t.trending,onChange:e=>{i({...t,trending:e.target.checked?1:0})}}),"Mark as Featured"]})}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"instagramLink",className:"form-label",children:"Instagram Link"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"instagramLink",value:t.instagramLink,required:!0,onChange:e=>handleInputChange("instagramLink",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"youtubeLink",className:"form-label",children:"YouTube Link"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"youtubeLink",value:t.youtubeLink,required:!0,onChange:e=>handleInputChange("youtubeLink",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"facebookLink",className:"form-label",children:"Facebook Link"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"facebookLink",value:t.facebookLink,required:!0,onChange:e=>handleInputChange("facebookLink",e.target.value)})]}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"d-flex justify-content-center mt-5",children:(0,l.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Add Blog"})})]})})})})})]})})})}},function(e){e.O(0,[381,99,774,888,179],function(){return e(e.s=87056)}),_N_E=e.O()}]);