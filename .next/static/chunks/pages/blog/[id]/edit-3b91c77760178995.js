(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{61212:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/[id]/edit",function(){return t(44271)}])},44271:function(e,a,t){"use strict";t.r(a);var l=t(85893),n=t(11163),s=t(67294),r=t(91742),i=t(1613),o=t(5121),c=t(18389),d=t(5152),m=t.n(d),u=t(18051);let h=m()(()=>Promise.all([t.e(326),t.e(640)]).then(t.t.bind(t,72911,23)),{loadableGenerated:{webpack:()=>[72911]},ssr:!1}),g="https://api.newworldtrending.com/blog",f={readonly:!1,enableDragAndDropFileToEditor:!0,uploader:{insertImageAsBase64URI:!1,imagesExtensions:["jpg","png","jpeg","gif"],withCredentials:!1,format:"json",method:"POST",url:"https://api.newworldtrending.com/blog/file/upload",prepareData:function(e){return e.append("file",e.get("files[0]")),e},isSuccess:function(e){return!e.error},process:function(e){return{files:[e.data],path:e.path,baseurl:e.baseurl,error:e.error?1:0,msg:e.msg}},defaultHandlerSuccess:function(e,a){let t=e.files||[];console.log("default data",e),console.log("resp",a),t.length&&this.selection.insertImage(e.baseurl,null,250)},defaultHandlerError:function(e){console.log("error occure",e),this.events.fire("errorPopap",this.i18n(null==e?void 0:e.msg))}}};a.default=(0,i.Z)(()=>{let e=(0,s.useRef)(null),[a,t]=(0,s.useState)({title:"",banner:[],permalink:"",content:"",metaTitle:"",metaDescription:"",categories:[],tags:[],featuredImages:[],author:"",status:"draft",instagramLink:"https://www.instagram.com/newworld.trending/",youtubeLink:"https://youtube.com/@NWT_YT?feature=shared",facebookLink:"https://www.newworldtrending.com/",adminId:"",categoryId:"",isFeatured:!1}),[i,d]=(0,s.useState)(!1),handleInputChange=(e,l)=>{t({...a,[e]:l})},handleTitleChange=e=>{t({...a,title:e.target.value,metaTitle:e.target.value})};async function handleUpdateBlog(e){d(!0),e.preventDefault();try{let e=a.banner.length>0?await (0,c.e)(a.banner):a.banner,t=a.featuredImages.length>0?await (0,c.e)(a.featuredImages):a.featuredImages,l={...a,bannerImg:e,featuredImages:t},n=await o.Z.put("".concat(g,"/update_blog/").concat(a.id),l);n.data.message.length>0&&(alert(n.data.message),fetchBlog(a.id)),d(!1)}catch(e){d(!1),console.log(e)}}let[m,p]=(0,s.useState)([]);async function fetchCategories(){try{let e=await o.Z.get(g+"/category");p(e.data.categories)}catch(e){console.log(e),p([])}}let x=(0,n.useRouter)();async function fetchBlog(e){try{let a=await o.Z.get(g+"/get_blog_by_id/"+e);t(a.data.data)}catch(e){console.log(e)}}return(0,s.useEffect)(()=>{let{id:e}=x.query;fetchBlog(e),fetchCategories(),t({...a,adminId:sessionStorage.getItem("userId")})},[x]),(0,l.jsx)(l.Fragment,{children:i?(0,l.jsx)(u.U,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{}),(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"col-md-12 d-flex flex-column align-items-center justify-content-center",children:(0,l.jsx)("form",{onSubmit:handleUpdateBlog,children:(0,l.jsx)("div",{className:"card md-12",children:(0,l.jsxs)("div",{className:"card-body row container gx-4 gy-4",children:[(0,l.jsx)("div",{className:"pt pb-2",children:(0,l.jsx)("h5",{className:"card-title text-center pb-0 fs-4",children:"Update Blog Here"})}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"title",className:"form-label",children:" Title"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"title",value:a.title,required:!0,onChange:e=>handleTitleChange(e)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"formFile",className:"form-label",children:"Banner Image"}),(0,l.jsx)("input",{type:"file",className:"form-control-file",id:"formFile",onChange:e=>(function(e){let l=[e.target.files[0]];t({...a,banner:l})})(e)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"content",className:"form-label",children:"Content"}),(0,l.jsx)(h,{ref:e,value:a.content,config:f,tabIndex:1,required:!0,onChange:e=>{handleInputChange("content",e)}})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"Meta Title",className:"form-label",children:"Meta Title"}),(0,l.jsx)("input",{className:"form-control",id:"metaTitle",value:a.metaTitle,required:!0,onChange:e=>handleInputChange("metaTitle",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"metaDescription",className:"form-label",children:"Meta Description"}),(0,l.jsx)("textarea",{className:"form-control",id:"metaDescription",value:a.metaDescription,required:!0,onChange:e=>handleInputChange("metaDescription",e.target.value)})]}),(0,l.jsxs)("div",{className:"col-md-12",children:[(0,l.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Category"}),(0,l.jsxs)("select",{className:"form-select",id:"categories",required:!0,onChange:e=>handleInputChange("categoryId",e.target.value),value:a.categoryId,children:[(0,l.jsx)("option",{value:"",children:"Select Category"}),m.length>0&&m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Keywords"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"categories",value:a.categories.join(", "),required:!0,onChange:e=>handleInputChange("categories",e.target.value.split(", "))})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"tags",className:"form-label",children:"Tags"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"tags",value:a.tags.join(", "),required:!0,onChange:e=>handleInputChange("tags",e.target.value.split(", "))})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"featuredImages",className:"form-label",children:"Featured Images"}),(0,l.jsx)("input",{type:"file",className:"form-control-file",id:"featuredImages",multiple:!0,onChange:e=>(function(e){let l=e.target.files,n=Array.from(l);t({...a,featuredImages:n})})(e)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"author",className:"form-label",children:"Author"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"author",value:a.author,required:!0,onChange:e=>handleInputChange("author",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,l.jsxs)("select",{className:"form-select",id:"status",value:a.status,onChange:e=>handleInputChange("status",e.target.value),children:[(0,l.jsx)("option",{value:"published",children:"Published"}),(0,l.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:a.isFeatured,onChange:e=>{t({...a,isFeatured:!!e.target.checked})}}),"Mark as Featured"]})}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"instagramLink",className:"form-label",children:"Instagram Link"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"instagramLink",value:a.instagramLink,required:!0,onChange:e=>handleInputChange("instagramLink",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"youtubeLink",className:"form-label",children:"YouTube Link"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"youtubeLink",value:a.youtubeLink,required:!0,onChange:e=>handleInputChange("youtubeLink",e.target.value)})]}),(0,l.jsxs)("div",{className:"md-12",children:[(0,l.jsx)("label",{htmlFor:"facebookLink",className:"form-label",children:"Facebook Link"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"facebookLink",value:a.facebookLink,required:!0,onChange:e=>handleInputChange("facebookLink",e.target.value)})]}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"d-flex justify-content-center mt-5",children:(0,l.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update Blog"})})]})})})})})]})})})}},function(e){e.O(0,[381,99,774,888,179],function(){return e(e.s=61212)}),_N_E=e.O()}]);